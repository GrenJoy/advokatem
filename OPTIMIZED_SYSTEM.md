# üöÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Å–µ—Å—Å–∏—è–º–∏ –ò–ò-—á–∞—Ç–∞

## üß† **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–∞–º—è—Ç–∏ –ò–ò:**

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ—Ä–æ–≥–æ
- –ò–ò "–∑–∞–±—ã–≤–∞–µ—Ç" –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ OCR –¥–∞–Ω–Ω—ã—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å

### **–†–µ—à–µ–Ω–∏–µ:**
1. **–°–µ—Å—Å–∏–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** - –∫–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è —á–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–µ–ª–∞ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 1 —á–∞—Å
3. **–£–º–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã** - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

## üóÑÔ∏è **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

### **–¢–∞–±–ª–∏—Ü—ã:**
- `cases` - –¥–µ–ª–∞
- `case_photos` - —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- `photo_ocr_results` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã OCR
- `photo_comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ñ–æ—Ç–æ
- `ai_chat_sessions` - **—Å–µ—Å—Å–∏–∏ –ò–ò-—á–∞—Ç–∞**
- `ai_chat_messages` - **—Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–µ—Å—Å–∏—è—Ö**
- `case_context_cache` - **–∫—ç—à –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–µ–ª–∞**

### **–§—É–Ω–∫—Ü–∏–∏ PostgreSQL:**
- `get_or_create_active_session()` - –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
- `get_case_context_summary()` - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## üéØ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**

### **1. –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ:**
- –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–µ–ª–∞
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Gemini —Å –ø–æ–ª–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 1 —á–∞—Å

### **2. –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–µ—Å—Å–∏—è
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫—Ä–∞—Ç–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç + –∏—Å—Ç–æ—Ä–∏—è
- **–≠–∫–æ–Ω–æ–º–∏—è: ~70% —Ç–æ–∫–µ–Ω–æ–≤**

### **3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–µ–ª–∞ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 1 —á–∞—Å
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ –∫—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–µ–ª–∞ –∫—ç—à —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è

## üìä **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:**

### **–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: ~2000-5000 —Ç–æ–∫–µ–Ω–æ–≤
- 10 —Å–æ–æ–±—â–µ–Ω–∏–π: ~20,000-50,000 —Ç–æ–∫–µ–Ω–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.40-1.00 –∑–∞ 10 —Å–æ–æ–±—â–µ–Ω–∏–π

### **–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:**
- –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: ~2000-5000 —Ç–æ–∫–µ–Ω–æ–≤
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ: ~500-1000 —Ç–æ–∫–µ–Ω–æ–≤
- 10 —Å–æ–æ–±—â–µ–Ω–∏–π: ~6,500-14,000 —Ç–æ–∫–µ–Ω–æ–≤
- **–≠–∫–æ–Ω–æ–º–∏—è: 65-70%**

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

### 1. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:**
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ optimized_schema.sql
```

### 2. **–û–±–Ω–æ–≤–∏—Ç–µ frontend:**
```javascript
// –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ /api/legal/ –Ω–∞ /api/optimized/
const response = await fetch('/api/optimized/cases')
```

### 3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
```
POSTGRES_URL=postgresql://...
GEMINI_API_KEY=–≤–∞—à_–∫–ª—é—á
```

## üé® **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

### **–°–µ—Å—Å–∏–∏ —á–∞—Ç–∞:**
- –ö–∞–∂–¥–æ–µ –¥–µ–ª–æ –∏–º–µ–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### **–£–º–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 1 —á–∞—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –ö—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

### **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã:**
- –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ

## üß™ **API Endpoints:**

### **–û—Å–Ω–æ–≤–Ω—ã–µ:**
- `GET /api/optimized/cases` - —Å–ø–∏—Å–æ–∫ –¥–µ–ª
- `POST /api/optimized/cases` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ–ª–∞
- `GET /api/optimized/cases/{id}` - –¥–µ—Ç–∞–ª–∏ –¥–µ–ª–∞

### **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏:**
- `POST /api/optimized/photos/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
- `GET /api/optimized/photos/{id}/ocr-status` - —Å—Ç–∞—Ç—É—Å OCR
- `POST /api/optimized/photos/{id}/comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

### **–ò–ò-—á–∞—Ç:**
- `POST /api/optimized/cases/{id}/chat` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `GET /api/optimized/cases/{id}/chat` - –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
- `GET /api/optimized/cases/{id}/sessions` - —Å–µ—Å—Å–∏–∏ —á–∞—Ç–∞

## üéâ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

### **–≠–∫–æ–Ω–æ–º–∏—è:**
- ‚úÖ 65-70% —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ API
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –ò–ò
- ‚úÖ –ü–∞–º—è—Ç—å –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–ª —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- ‚úÖ OCR —á–µ—Ä–µ–∑ Gemini 2.5 Flash
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º
- ‚úÖ –ò–ò-—á–∞—Ç —Å –ø–∞–º—è—Ç—å—é
- ‚úÖ –°–µ—Å—Å–∏–∏ —á–∞—Ç–∞
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ò–ò-—á–∞—Ç–æ–º –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!
