# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ó–û–õ–Ø–¶–ò–ò –ß–ê–¢–ê –ü–û –î–ï–õ–ê–ú

## üêõ **–ü–†–û–ë–õ–ï–ú–ê:**
–ß–∞—Ç –±—ã–ª –æ–±—â–∏–π –¥–ª—è –≤—Å–µ—Ö –¥–µ–ª - –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É –¥–µ–ª–∞–º–∏ –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –æ—á–∏—â–∞–ª–∞—Å—å, –∏ –ò–ò –≤–∏–¥–µ–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –¥–µ–ª.

## ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**

### **1. –û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–µ–ª–∞:**
```javascript
useEffect(() => {
  if (selectedCase) {
    // –û—á–∏—â–∞–µ–º —á–∞—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –¥–µ–ª
    setChatMessages([])
    setChatInput('')
    setIsChatLoading(false)
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–≥–æ –¥–µ–ª–∞
    loadDocuments(selectedCase.id)
    loadChatHistory(selectedCase.id)
    loadAdditionalFiles(selectedCase.id)
  } else {
    // –û—á–∏—â–∞–µ–º –≤—Å–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–µ–ª–∞
    setChatMessages([])
    setChatInput('')
    setIsChatLoading(false)
    setDocuments([])
    setAdditionalFiles([])
  }
}, [selectedCase])
```

### **2. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–ª–∞ –≤ —á–∞—Ç–µ:**
```jsx
<div className="flex items-center justify-between mb-4">
  <div>
    <h3 className="text-lg font-semibold">–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</h3>
    <p className="text-sm text-gray-500">–î–µ–ª–æ: {selectedCase.title}</p>
  </div>
  <Button onClick={() => setShowChat(!showChat)}>
    {showChat ? '–°–∫—Ä—ã—Ç—å —á–∞—Ç' : '–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç'}
  </Button>
</div>
```

### **3. –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—É—Å—Ç–æ–º —á–∞—Ç–µ:**
```jsx
{chatMessages.length === 0 ? (
  <div className="text-center text-gray-500 py-8">
    <MessageCircle className="h-12 w-12 mx-auto mb-4 text-gray-300" />
    <p>–ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥ —Å –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º</p>
    <p className="text-sm">–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∑–Ω–∞–µ—Ç –≤—Å–µ –æ –¥–µ–ª–µ "{selectedCase.title}" –∏ –µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö</p>
    <p className="text-xs text-gray-400 mt-2">
      –ó–∞–≥—Ä—É–∂–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: {documents.length} | 
      –î–æ–ø. —Ñ–∞–π–ª–æ–≤: {additionalFiles.length}
    </p>
  </div>
) : (
  // –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
)}
```

### **4. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞:**
```javascript
const loadChatHistory = async (caseId) => {
  try {
    setIsChatLoading(true)
    const response = await fetch(`/api/optimized/cases/${caseId}/chat`)
    if (response.ok) {
      const messages = await response.json()
      setChatMessages(messages)
    }
  } catch (error) {
    console.error('Error loading chat history:', error)
  } finally {
    setIsChatLoading(false)
  }
}
```

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### **–ò–∑–æ–ª—è—Ü–∏—è —á–∞—Ç–∞:**
- ‚úÖ **–ö–∞–∂–¥–æ–µ –¥–µ–ª–æ –∏–º–µ–µ—Ç —Å–≤–æ–π —á–∞—Ç** - –∏—Å—Ç–æ—Ä–∏—è –Ω–µ —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** - –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–µ–ª–∞ —á–∞—Ç –æ—á–∏—â–∞–µ—Ç—Å—è
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏** - –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–µ–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –µ–≥–æ –∏—Å—Ç–æ—Ä–∏—è

### **–£–ª—É—á—à–µ–Ω–Ω—ã–π UX:**
- ‚úÖ **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–µ–ª–∞** - –≤–∏–¥–Ω–æ, –¥–ª—è –∫–∞–∫–æ–≥–æ –¥–µ–ª–∞ –æ—Ç–∫—Ä—ã—Ç —á–∞—Ç
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞** - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞

### **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω** - –ò–ò –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–µ –¥–µ–ª–æ
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** - –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ –¥–µ–ª—É –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è
- ‚úÖ **–ù–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã** - —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –¥–µ–ª–∞–º–∏

## üîÑ **–ö–ê–ö –¢–ï–ü–ï–†–¨ –†–ê–ë–û–¢–ê–ï–¢:**

### **–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–µ–ª–∞:**
1. **–û—á–∏—â–∞–µ—Ç—Å—è —á–∞—Ç** - —É–±–∏—Ä–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–µ–ª–∞
2. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è** - –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–µ–ª–∞
3. **–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç** - –ò–ò –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–≤–æ–º –¥–µ–ª–µ

### **–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É –¥–µ–ª–∞–º–∏:**
1. **–î–µ–ª–æ –ê** ‚Üí —á–∞—Ç –æ—á–∏—â–∞–µ—Ç—Å—è ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –¥–µ–ª–∞ –ê
2. **–î–µ–ª–æ –ë** ‚Üí —á–∞—Ç –æ—á–∏—â–∞–µ—Ç—Å—è ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –¥–µ–ª–∞ –ë
3. **–í–æ–∑–≤—Ä–∞—Ç –∫ –¥–µ–ª—É –ê** ‚Üí —á–∞—Ç –æ—á–∏—â–∞–µ—Ç—Å—è ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –¥–µ–ª–∞ –ê

### **–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–µ–ª–∞:**
- –ß–∞—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç—Å—è
- –î–æ–∫—É–º–µ–Ω—Ç—ã –æ—á–∏—â–∞—é—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã–±–æ—Ä–µ –¥–µ–ª–∞

**–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥–æ–µ –¥–µ–ª–æ –∏–º–µ–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–∞—Ç!** üéâ
